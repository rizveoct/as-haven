<div class="container mx-auto p-6">
  <!-- Header -->
  <div class="flex items-center mb-6 fade-up animate">
    <h6 class="text-lg font-bold text-dark grow">List of Projects</h6>
    <a
      [routerLink]="['create']"
      class="px-5 py-2 text-white bg-accent border border-accent/80 hover:bg-accent/80 focus:ring-2 focus:ring-accent/50 rounded-lg transition duration-300"
    >
      <span class="align-middle">Create Project</span>
    </a>
  </div>

  <!-- Projects Table -->
  <div
    class="relative overflow-x-auto bg-white rounded-lg shadow-md fade-up animate"
  >
    <table class="min-w-full divide-y divide-lightDark">
      <thead class="bg-accentLight">
        <tr>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Name
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Description
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Address
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Thumbnail
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Category
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Type
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Content
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Offer Title
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Offer Date
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Status
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-dark uppercase tracking-wider"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-lightDark">
        <tr
          *ngFor="let item of projects"
          class="hover:bg-light transition duration-200 fade-up animate"
        >
          <td class="px-6 py-4 font-medium text-dark whitespace-nowrap">
            {{ item.name }}
          </td>
          <td class="px-6 py-4 text-sm text-dark">
            <ng-container *ngIf="item.description; else noDescription">
              {{ item.description | slice : 0 : 100
              }}{{ item.description.length > 100 ? "..." : "" }}
            </ng-container>
            <ng-template #noDescription>-</ng-template>
          </td>
          <td class="px-6 py-4 text-sm text-dark">{{ item.address }}</td>
          <td class="px-6 py-4">
            <img
              class="w-10 h-10 object-cover rounded"
              [src]="apiBaseUrl + '/api/attachment/get/' + item.thumbnail"
              alt="Thumbnail"
            />
          </td>
          <td class="px-6 py-4 text-sm text-dark">{{ item.category }}</td>
          <td class="px-6 py-4 text-sm text-dark">{{ item.type }}</td>
          <td class="px-6 py-4">
            <ng-container *ngIf="item.contentType === 'Image'">
              <img
                class="w-10 h-10 object-cover rounded"
                [src]="apiBaseUrl + '/api/attachment/get/' + item.content"
                alt="Content"
              />
            </ng-container>
            <ng-container *ngIf="item.contentType === 'Video'">
              <video class="w-10 h-10 object-cover rounded" controls>
                <source
                  [src]="apiBaseUrl + '/api/attachment/get/' + item.content"
                  type="video/mp4"
                />
              </video>
            </ng-container>
          </td>
          <td class="px-6 py-4 text-sm text-dark">{{ item.offerTitle }}</td>
          <td class="px-6 py-4 text-sm text-dark">
            {{ item.offerDateTime | date : "short" }}
          </td>
          <td class="px-6 py-4">
            <span
              *ngIf="item.isActive"
              class="px-2.5 py-0.5 text-xs font-medium rounded bg-accent/20 text-accent inline-flex items-center"
            >
              <i class="fas fa-check-circle mr-1.5"></i> Active
            </span>
            <span
              *ngIf="!item.isActive"
              class="px-2.5 py-0.5 text-xs font-medium rounded bg-red-500/20 text-red-500 inline-flex items-center"
            >
              <i class="fas fa-times-circle mr-1.5"></i> Inactive
            </span>
          </td>
          <td class="px-6 py-4 text-right space-x-2">
            <!-- Edit -->
            <a
              [routerLink]="[item.id, 'edit']"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-accent rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Edit</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </a>

            <!-- Deactivate -->
            <button
              *ngIf="item.isActive"
              (click)="toggleProjectActive(item.id, false)"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-red-500 rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Deactivate</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </button>

            <!-- Activate -->
            <button
              *ngIf="!item.isActive"
              (click)="toggleProjectActive(item.id, true)"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-accent rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Activate</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </button>

            <!-- Delete -->
            <button
              (click)="deleteProject(item.id)"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-red-500 rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Delete</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </button>

            <!-- Gallery -->
            <a
              [routerLink]="[item.id, 'gallery']"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-accent rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Gallery</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </a>

            <!-- Features -->
            <a
              [routerLink]="[item.id, 'features']"
              class="relative inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-accent rounded-lg overflow-hidden group transition-all duration-300"
            >
              <span class="relative z-10">Features</span>
              <span
                class="absolute inset-0 bg-dark transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"
              ></span>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
