<section
  *ngIf="slides.length; else heroSkeleton"
  class="neo-hero"
  aria-live="polite"
>
  <div class="neo-hero__background" aria-hidden="true">
    <div class="neo-hero__gradient neo-hero__gradient--primary"></div>
    <div class="neo-hero__gradient neo-hero__gradient--secondary"></div>
    <div
      class="neo-hero__background-image"
      *ngFor="let slide of slides; let i = index; trackBy: trackBySlide"
      [style.backgroundImage]="'url(' + slide.image + ')'"
      [class.is-active]="i === currentIndex"
    ></div>
    <div class="neo-hero__pattern"></div>
  </div>

  <div *ngIf="activeSlide as active" class="neo-hero__container page-width">
    <div class="neo-hero__grid">
      <aside class="neo-hero__sidebar">
        <span class="neo-hero__eyebrow">Avant-garde living</span>
        <h1 class="neo-hero__title">
          {{ active.title }}
        </h1>
        <p class="neo-hero__subtitle">
          {{ active.topic }}
        </p>
        <p class="neo-hero__description">
          {{ active.des }}
        </p>

        <div class="neo-hero__meta">
          <div>
            <span class="neo-hero__meta-label">Collection</span>
            <span class="neo-hero__meta-value">
              {{ active.author }}
            </span>
          </div>
          <div>
            <span class="neo-hero__meta-label">Signature</span>
            <span class="neo-hero__meta-value">
              {{ active.thumbnailDescription }}
            </span>
          </div>
        </div>

        <div class="neo-hero__cta">
          <a
            class="neo-hero__button neo-button"
            [routerLink]="['/projectdetails', active.id]"
            [attr.aria-label]="'Explore ' + active.title"
            >Explore project</a
          >
          <a
            class="neo-hero__button neo-outline-button"
            [routerLink]="['/project']"
            aria-label="Browse all projects"
            >Browse all</a
          >
        </div>

        <div class="neo-hero__progress">
          <div class="neo-hero__progress-track">
            <div
              class="neo-hero__progress-fill"
              [style.width.%]="progress"
            ></div>
          </div>
          <span class="neo-hero__progress-index">
            {{ currentIndex + 1 | number: '2.0' }} /
            {{ slides.length | number: '2.0' }}
          </span>
        </div>
      </aside>

      <div class="neo-hero__stage" role="group" aria-label="Featured project visual">
        <div class="neo-hero__stage-frame">
          <img
            [src]="active.image"
            [alt]="active.alt || 'Project visual'"
            loading="lazy"
          />
          <div class="neo-hero__stage-glow"></div>
        </div>

        <div class="neo-hero__floating-card neo-hero__floating-card--primary">
          <span class="neo-hero__floating-label">Feature</span>
          <strong>{{ active.author }}</strong>
          <span>{{ active.topic }}</span>
        </div>

        <div class="neo-hero__floating-card neo-hero__floating-card--secondary">
          <span class="neo-hero__floating-label">Status</span>
          <strong>In focus</strong>
          <span>{{ active.thumbnailTitle }}</span>
        </div>

        <div class="neo-hero__controls" role="group" aria-label="Slide controls">
          <button
            type="button"
            class="neo-hero__control"
            (click)="prev()"
            aria-label="Previous highlight"
          >
            <span aria-hidden="true">&#8592;</span>
          </button>
          <button
            type="button"
            class="neo-hero__control"
            (click)="next()"
            aria-label="Next highlight"
          >
            <span aria-hidden="true">&#8594;</span>
          </button>
        </div>
      </div>

      <nav class="neo-hero__thumbnails" aria-label="Project quick navigation">
        <button
          type="button"
          class="neo-hero__thumbnail"
          *ngFor="let project of slides; let i = index; trackBy: trackBySlide"
          [class.is-active]="i === currentIndex"
          (click)="goToSlide(i)"
          [attr.aria-label]="'Go to ' + project.thumbnailTitle"
        >
          <span class="neo-hero__thumbnail-index">
            {{ (i + 1) | number: '2.0' }}
          </span>
          <span class="neo-hero__thumbnail-text">
            <strong>{{ project.thumbnailTitle }}</strong>
            <small>{{ project.thumbnailDescription }}</small>
          </span>
        </button>
      </nav>
    </div>
  </div>
</section>

<ng-template #heroSkeleton>
  <section class="neo-hero neo-hero--loading" aria-busy="true">
    <div class="neo-hero__shimmer"></div>
  </section>
</ng-template>
