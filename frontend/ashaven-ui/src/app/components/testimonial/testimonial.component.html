<section class="luxe-section luxe-testimonial" *ngIf="testimonials.length">
  <header class="luxe-section__header">
    <span class="luxe-eyebrow luxe-reveal">Testimonials</span>
    <h2 class="luxe-title luxe-reveal" data-delay="1">Voices from our residents & partners</h2>
    <p class="luxe-subtitle luxe-reveal" data-delay="2">
      Crafted stories from clients who entrusted us with their most significant real estate decisions —
      from penthouse sanctuaries to expansive vineyard estates.
    </p>
  </header>

  <div class="luxe-testimonial__surface">
    <button
      class="luxe-testimonial__control luxe-testimonial__control--prev"
      (click)="prev()"
      aria-label="Previous testimonial"
      type="button"
    >
      <span>&larr;</span>
    </button>

    <article *ngIf="currentTestimonial" class="luxe-testimonial__card" [@slideAnimation]="currentIndex">
      <div class="luxe-testimonial__profile">
        <div class="luxe-avatar">
          <img
            *ngIf="currentTestimonial?.image; else placeholderImage"
            [src]="baseURL + '/api/attachment/get/' + currentTestimonial.image"
            [alt]="currentTestimonial.name"
            (error)="onImageError($event)"
          />
          <ng-template #placeholderImage>
            <img
              src="https://img.freepik.com/free-vector/illustration-gallery-icon_53876-27002.jpg"
              alt="Placeholder image"
            />
          </ng-template>
        </div>
        <div class="luxe-testimonial__quote" aria-hidden="true">”</div>
      </div>

      <p class="luxe-testimonial__text">
        {{ currentTestimonial.description }}
      </p>

      <div class="luxe-testimonial__meta">
        <h3>{{ currentTestimonial.name }}</h3>
        <span class="luxe-testimonial__divider"></span>
        <p>Private buyer</p>
      </div>
    </article>

    <button
      class="luxe-testimonial__control luxe-testimonial__control--next"
      (click)="next()"
      aria-label="Next testimonial"
      type="button"
    >
      <span>&rarr;</span>
    </button>
  </div>

  <div class="luxe-testimonial__pagination">
    <span>{{ currentIndex + 1 | number: '2.0' }}</span>
    <span class="luxe-testimonial__pagination-divider"></span>
    <span>{{ testimonials.length | number: '2.0' }}</span>
  </div>
</section>
