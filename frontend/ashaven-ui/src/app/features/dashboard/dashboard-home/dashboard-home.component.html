<section class="luxe-dashboard-home">
  <header class="luxe-dashboard-home__hero">
    <div>
      <span class="luxe-eyebrow">Portfolio Intelligence</span>
      <h1 class="luxe-dashboard-home__title">Your luxury real estate command centre</h1>
      <p>
        Monitor listing momentum, guest inquiries, and operational health in real time. Use these insights to fine-tune
        launch timelines, investment strategies, and concierge responses.
      </p>
    </div>
    <div class="luxe-dashboard-home__hero-cta">
      <a routerLink="/dashboard/projects/create" class="luxe-button">Add new residence</a>
      <a routerLink="/dashboard/projects" class="luxe-button luxe-button--ghost">Manage inventory</a>
    </div>
  </header>

  <div class="luxe-dashboard-home__metrics">
    <article class="luxe-dashboard-home__metric-card">
      <span class="luxe-dashboard-home__metric-label">Managed listings</span>
      <strong>{{ projects.length }}</strong>
      <small *ngIf="projectsError" class="luxe-dashboard-home__error">{{ projectsError }}</small>
      <div class="luxe-dashboard-home__spark">
        <span
          class="luxe-dashboard-home__spark-line"
          [style.--fill]="(projects.length % 12) / 12"
        ></span>
        <span>{{ projects.length >= 12 ? 'Collection at capacity' : 'Room for expansion' }}</span>
      </div>
    </article>

    <article class="luxe-dashboard-home__metric-card">
      <span class="luxe-dashboard-home__metric-label">Client inquiries</span>
      <strong>{{ totalInquiries }}</strong>
      <small *ngIf="inquiriesError" class="luxe-dashboard-home__error">{{ inquiriesError }}</small>
      <div class="luxe-dashboard-home__spark">
        <span class="luxe-dashboard-home__spark-progress">
          <span [style.width.%]="Math.min(totalInquiries, 100)"></span>
        </span>
        <span>{{ totalInquiries | number }} touchpoints this quarter</span>
      </div>
    </article>

    <article class="luxe-dashboard-home__metric-card luxe-dashboard-home__metric-card--accent">
      <span class="luxe-dashboard-home__metric-label">Conversion health</span>
      <strong>{{ (projects.length && totalInquiries) ? (totalInquiries / projects.length | number:'1.0-0') : 0 }}%</strong>
      <p>Average inquiry-to-listing ratio. Maintain white-glove response times to keep momentum.</p>
    </article>
  </div>

  <div class="luxe-dashboard-home__grid">
    <section class="luxe-dashboard-home__panel">
      <header>
        <h2>Active portfolio</h2>
        <a routerLink="/dashboard/projects" class="luxe-link">View all listings</a>
      </header>
      <div class="luxe-dashboard-home__table">
        <table>
          <thead>
            <tr>
              <th>Residence</th>
              <th>Location</th>
              <th>Status</th>
              <th>Published</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let project of projects | slice:0:6">
              <td>{{ project.name }}</td>
              <td>{{ project.address || '—' }}</td>
              <td>{{ project.category || '—' }}</td>
              <td>{{ project.createDate | date: 'yyyy-MM-dd' }}</td>
            </tr>
            <tr *ngIf="projects.length === 0 && !projectsError">
              <td colspan="4">No listings available yet. Add your first residence.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="luxe-dashboard-home__panel luxe-dashboard-home__panel--accent">
      <header>
        <h2>Inquiry queue</h2>
        <p>{{ totalInquiries | number }} conversations awaiting curated responses.</p>
      </header>
      <div class="luxe-dashboard-home__progress">
        <div class="luxe-dashboard-home__progress-row">
          <span>Hot leads</span>
          <div class="luxe-dashboard-home__progress-bar"><span [style.width.%]="Math.min(totalInquiries * 0.35, 100)"></span></div>
          <span>{{ (totalInquiries * 0.35) | number:'1.0-0' }}</span>
        </div>
        <div class="luxe-dashboard-home__progress-row">
          <span>Private tours</span>
          <div class="luxe-dashboard-home__progress-bar"><span [style.width.%]="Math.min(totalInquiries * 0.2, 100)"></span></div>
          <span>{{ (totalInquiries * 0.2) | number:'1.0-0' }}</span>
        </div>
        <div class="luxe-dashboard-home__progress-row">
          <span>New enquiries</span>
          <div class="luxe-dashboard-home__progress-bar"><span [style.width.%]="Math.min(totalInquiries * 0.45, 100)"></span></div>
          <span>{{ (totalInquiries * 0.45) | number:'1.0-0' }}</span>
        </div>
      </div>
      <a routerLink="/dashboard/clients" class="luxe-button luxe-button--ghost">Review inquiry log</a>
    </section>
  </div>
</section>
