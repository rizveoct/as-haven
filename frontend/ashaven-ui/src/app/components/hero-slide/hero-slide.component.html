<section
  *ngIf="slides.length; else heroSkeleton"
  class="relative isolate overflow-hidden bg-gradient-to-br from-brand via-brand/95 to-emerald-950 py-16 text-pure sm:py-20 pt-[5rem]"
  aria-live="polite"
>

  <div class="pointer-events-none absolute inset-0">
    <div
      class="absolute -left-40 -top-44 h-[52vw] w-[52vw] rounded-full bg-accent/35 blur-3xl"
    ></div>
    <div
      class="absolute -bottom-56 right-[-18vw] h-[58vw] w-[58vw] rounded-full bg-brand/45 blur-3xl"
    ></div>
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.06),_transparent_60%)]"
      aria-hidden="true"
    ></div>
    <div
      class="absolute inset-0 bg-[linear-gradient(120deg,_rgba(12,27,18,0.95),_rgba(6,16,11,0.88))]"
      aria-hidden="true"
    ></div>

    <div
      class="absolute inset-0 bg-cover bg-center opacity-0 transition duration-700 ease-out will-change-transform sm:scale-105"
      *ngFor="let slide of slides; let i = index; trackBy: trackBySlide"
      [style.backgroundImage]="'url(' + slide.image + ')'"
      [ngClass]="{
        'opacity-30 sm:scale-100': i === currentIndex
      }"
    ></div>
  </div>

  <div
    *ngIf="activeSlide as active"
    class="relative mx-auto flex w-[min(1180px,92%)] md:w-[80%] flex-col gap-12 pt-10 "
  >
    <div
      class="grid items-start gap-12 lg:grid-cols-[minmax(0,320px)_1fr_minmax(200px,240px)]"
      aria-label="Featured project"
    >
      <aside class="flex flex-col gap-6">
        <span
          class="inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.32em] text-white/70"
        >
          <span class="h-2 w-2 rounded-full bg-accent"></span>
          Avant-garde living
        </span>
        <h1 class="font-serif text-4xl font-semibold leading-tight sm:text-5xl">
          {{ active.title }}
        </h1>
        <p class="text-base font-medium text-white/80 sm:text-lg">
          {{ active.topic }}
        </p>
        <p class="max-w-xl text-sm leading-relaxed text-white/70 sm:text-base">
          {{ active.des }}
        </p>

        <div
          class="grid w-full grid-cols-2 gap-4 rounded-2xl border border-white/15 bg-white/5 p-5 backdrop-blur"
        >
          <div class="space-y-1">
            <span
              class="block text-[0.65rem] font-semibold uppercase tracking-[0.22em] text-white/60"
              >Collection</span
            >
            <span class="text-base font-semibold">{{ active.author }}</span>
          </div>
          <div class="space-y-1">
            <span
              class="block text-[0.65rem] font-semibold uppercase tracking-[0.22em] text-white/60"
              >Signature</span
            >
            <span class="text-base font-semibold">{{
              active.thumbnailDescription
            }}</span>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <a
            class="inline-flex items-center gap-2 rounded-full bg-accent px-6 py-3 text-sm font-semibold text-pure shadow-lg transition hover:-translate-y-0.5 hover:bg-orange-500"
            [routerLink]="['/projectdetails', active.id]"
            [attr.aria-label]="'Explore ' + active.title"
          >
            Explore project
          </a>
          <a
            class="inline-flex items-center gap-2 rounded-full border border-white/20 px-6 py-3 text-sm font-semibold text-white/80 transition hover:-translate-y-0.5 hover:border-white hover:text-white"
            [routerLink]="['/project']"
            aria-label="Browse all projects"
          >
            Browse all
          </a>
        </div>

        <div class="flex items-center gap-4 pt-2">
          <div
            class="relative h-1 w-full overflow-hidden rounded-full bg-white/20"
          >
            <div
              class="h-full rounded-full bg-gradient-to-r from-accent to-orange-500 transition-[width] duration-150 ease-linear"
              [style.width.%]="progress"
            ></div>
          </div>
          <span class="font-mono text-xs text-white/70">
            {{ currentIndex + 1 | number : "2.0" }} /
            {{ slides.length | number : "2.0" }}
          </span>
        </div>
      </aside>

      <div class="relative flex flex-col items-center gap-4">
        <div
          class="relative rounded-3xl border border-white/10 bg-white/10 shadow-[0_35px_90px_rgba(8,18,12,0.6)]"
        >
          <img
            [src]="active.image"
            [alt]="active.alt || 'Project visual'"
            class=" h-[400px] md:h-[600px] w-[500px] rounded-3xl"
            loading="lazy"
          />
          <div
            class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent"
          ></div>
        </div>

        <!-- Feature Floating Element -->
        <div
          class="absolute left-[-5px] top-[50px] min-w-[180px] max-w-[220px] rounded-2xl border border-white/20 bg-white/5 p-4 text-left text-sm shadow-lg backdrop-blur z-10 animate-float hidden md:block -translate-y-1/2"
        >
          <span
            class="block text-[0.6rem] uppercase tracking-[0.32em] text-white/60"
            >Feature</span
          >
          <strong class="block text-lg">{{ active.author }}</strong>
          <span class="text-white/70">{{ active.topic }}</span>
        </div>

        <!-- Status Floating Element -->
        <div
          class="absolute bottom-[120px] right-[-5px] min-w-[180px] max-w-[220px] rounded-2xl border border-white/20 bg-white/5 p-4 text-left text-sm shadow-lg backdrop-blur z-10 animate-float hidden md:block translate-y-1/2"
        >
          <span
            class="block text-[0.6rem] uppercase tracking-[0.32em] text-white/60"
            >Status</span
          >
          <strong class="block text-lg">In focus</strong>
          <span class="text-white/70">{{ active.thumbnailTitle }}</span>
        </div>

        <div class="mt-4 flex items-center gap-3">
          <button
            type="button"
            class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-white/30 bg-white/5 text-lg text-white transition hover:bg-white/20"
            (click)="prev()"
            aria-label="Previous highlight"
          >
            <span aria-hidden="true">&#8592;</span>
          </button>
          <button
            type="button"
            class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-white/30 bg-white/5 text-lg text-white transition hover:bg-white/20"
            (click)="next()"
            aria-label="Next highlight"
          >
            <span aria-hidden="true">&#8594;</span>
          </button>
        </div>
      </div>

     <nav
  class="flex flex-row gap-3 overflow-x-auto no-scrollbar
         md:flex-col md:overflow-y-auto md:overflow-x-hidden
         md:max-h-[25rem] md:gap-2 md:overscroll-contain"
  aria-label="Project quick navigation"
>
  <button
    #navItem
    type="button"
    class="flex flex-shrink-0 items-center gap-4 rounded-2xl border border-white/10
           bg-white/5 px-4 py-3 text-left text-sm text-white/70 transition
           hover:border-white/30 hover:text-white md:h-16"
    *ngFor="let project of slides; let i = index; trackBy: trackBySlide"
    [ngClass]="{
      'border-white/40 bg-white/15 text-white shadow-lg shadow-[0_12px_30px_rgba(0,0,0,0.2)]':
        i === currentIndex
    }"
    (click)="goToSlide(i)"
    [attr.aria-label]="'Go to ' + project.thumbnailTitle"
  >
    <span class="font-mono text-xs font-semibold text-white/60">
      {{ i + 1 | number : '2.0' }}
    </span>

    <span class="flex flex-col min-w-0">
      <strong class="truncate text-sm font-semibold text-white">
        {{ project.thumbnailTitle }}
      </strong>
      <small class="truncate text-xs text-white/70">
        {{ project.thumbnailDescription }}
      </small>
    </span>
  </button>
</nav>


    </div>
  </div>
</section>

<ng-template #heroSkeleton>
  <section
    class="relative isolate flex h-[480px] items-center justify-center overflow-hidden bg-gradient-to-br from-brand to-emerald-900"
    aria-busy="true"
  >
    <div class="h-32 w-32 animate-pulse rounded-full bg-white/10"></div>
  </section>
</ng-template>