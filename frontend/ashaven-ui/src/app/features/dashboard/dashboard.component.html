<div class="relative min-h-screen bg-gradient-to-br from-emerald-950 via-emerald-900 to-brand text-pure md:grid md:grid-cols-[280px_1fr]" (click)="closeSidebar($event)">
  <aside class="hidden h-full flex-col gap-10 border-r border-white/10 bg-emerald-950/85 p-8 backdrop-blur xl:flex">
    <div class="flex items-center gap-4">
      <span class="flex h-12 w-12 items-center justify-center rounded-2xl border border-white/20 bg-white/10 text-sm font-semibold tracking-[0.18em]">AE</span>
      <div class="space-y-1">
        <strong class="block font-serif text-lg uppercase tracking-[0.18em]">Ashaven Estates</strong>
        <span class="block text-xs uppercase tracking-[0.28em] text-white/60">Control Centre</span>
      </div>
    </div>

    <nav class="flex flex-1 flex-col gap-2" aria-label="Dashboard navigation">
      <a
        routerLink="/dashboard"
        [routerLinkActiveOptions]="{ exact: true }"
        routerLinkActive
        #overviewRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="overviewRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-chart-line"></i>
        <span>Overview</span>
      </a>
      <a
        routerLink="/dashboard/projects"
        routerLinkActive
        #projectsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="projectsRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-city"></i>
        <span>Property listings</span>
      </a>
      <a
        routerLink="/dashboard/clients"
        routerLinkActive
        #clientsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="clientsRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-user-tie"></i>
        <span>Client registry</span>
      </a>
      <a
        routerLink="/dashboard/teams"
        routerLinkActive
        #teamsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="teamsRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-users"></i>
        <span>Advisory team</span>
      </a>
      <a
        routerLink="/dashboard/testimonials"
        routerLinkActive
        #testimonialsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="testimonialsRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-comment-dots"></i>
        <span>Testimonials</span>
      </a>
      <a
        routerLink="/dashboard/gallery"
        routerLinkActive
        #galleryRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="galleryRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-images"></i>
        <span>Gallery</span>
      </a>
      <a
        routerLink="/dashboard/faq"
        routerLinkActive
        #faqRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="faqRla.isActive ? 'bg-accent/25 text-pure shadow-[0_18px_45px_rgba(32,71,38,0.35)]' : 'text-white/70 hover:bg-white/10 hover:text-white'"
      >
        <i class="fas fa-question-circle"></i>
        <span>FAQ</span>
      </a>

      <button
        type="button"
        class="mt-auto flex items-center gap-3 rounded-2xl border border-white/10 px-4 py-3 text-sm font-medium text-white/70 transition hover:-translate-y-0.5 hover:border-white hover:text-white"
        (click)="logout()"
      >
        <i class="fas fa-sign-out-alt"></i>
        <span>Sign out</span>
      </button>
    </nav>
  </aside>

  <aside *ngIf="showSidebar" class="fixed inset-0 z-50 flex bg-emerald-950/95 backdrop-blur-lg xl:hidden">
    <div class="flex w-full max-w-xs flex-col gap-6 border-r border-white/10 bg-emerald-950/90 p-6">
      <div class="flex items-center justify-between text-xs uppercase tracking-[0.28em] text-white/60">
        <span>Navigate</span>
        <button type="button" (click)="toggleSidebar()" aria-label="Close navigation" class="text-2xl text-white/70 transition hover:text-white">&times;</button>
      </div>
      <nav class="flex flex-col gap-2" aria-label="Mobile dashboard navigation">
        <a
          routerLink="/dashboard"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive
          #mobileOverview="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileOverview.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-chart-line"></i>
          <span>Overview</span>
        </a>
        <a
          routerLink="/dashboard/projects"
          routerLinkActive
          #mobileProjects="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileProjects.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-city"></i>
          <span>Property listings</span>
        </a>
        <a
          routerLink="/dashboard/clients"
          routerLinkActive
          #mobileClients="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileClients.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-user-tie"></i>
          <span>Client registry</span>
        </a>
        <a
          routerLink="/dashboard/teams"
          routerLinkActive
          #mobileTeams="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileTeams.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-users"></i>
          <span>Advisory team</span>
        </a>
        <a
          routerLink="/dashboard/testimonials"
          routerLinkActive
          #mobileTestimonials="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileTestimonials.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-comment-dots"></i>
          <span>Testimonials</span>
        </a>
        <a
          routerLink="/dashboard/gallery"
          routerLinkActive
          #mobileGallery="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileGallery.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-images"></i>
          <span>Gallery</span>
        </a>
        <a
          routerLink="/dashboard/faq"
          routerLinkActive
          #mobileFaq="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
          [ngClass]="mobileFaq.isActive ? 'bg-accent/25 text-pure' : 'text-white/70 hover:bg-white/10 hover:text-white'"
        >
          <i class="fas fa-question-circle"></i>
          <span>FAQ</span>
        </a>
        <button
          type="button"
          class="mt-4 flex items-center gap-3 rounded-2xl border border-white/10 px-4 py-3 text-sm font-medium text-white/70 transition hover:-translate-y-0.5 hover:border-white hover:text-white"
          (click)="logout()"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span>Sign out</span>
        </button>
      </nav>
    </div>
  </aside>

  <div class="relative flex min-h-screen flex-col bg-emerald-900/80">
    <header class="sticky top-0 z-20 flex items-center justify-between gap-4 border-b border-white/10 bg-emerald-950/70 px-6 py-4 backdrop-blur">
      <button type="button" class="inline-flex h-11 w-11 items-center justify-center rounded-full border border-white/20 bg-white/10 text-lg text-white transition hover:bg-white/20 xl:hidden" (click)="toggleSidebar()" aria-label="Toggle navigation">
        <i class="fas fa-bars"></i>
      </button>

      <div class="flex flex-col text-left">
        <span class="text-xs uppercase tracking-[0.28em] text-white/60">Welcome back, Agent</span>
        <strong class="font-serif text-xl">Performance dashboard</strong>
      </div>

      <div class="flex items-center gap-4">
        <div class="hidden items-center gap-2 rounded-full border border-white/15 bg-white/10 px-4 py-2 text-sm text-white/70 lg:flex">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search the portfolio" class="w-40 bg-transparent text-sm text-white/80 placeholder:text-white/50 focus:outline-none" />
        </div>
        <button class="relative inline-flex h-11 w-11 items-center justify-center rounded-full border border-white/20 bg-white/10 text-lg text-white transition hover:bg-white/20" type="button" aria-label="Notifications">
          <i class="fas fa-bell"></i>
          <span class="absolute right-2 top-2 h-2 w-2 rounded-full bg-accent"></span>
        </button>
        <div class="relative" (clickOutside)="closeProfileModal()">
          <button class="flex h-11 w-11 items-center justify-center rounded-full border border-white/20 bg-accent text-sm font-semibold" (click)="toggleProfileDropdown()">
            AE
          </button>
          <div *ngIf="showProfileDropdown" class="absolute right-0 mt-2 w-44 rounded-2xl border border-white/10 bg-emerald-950/95 p-2 text-sm shadow-lg">
            <button type="button" (click)="openProfileModal()" class="flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-white/80 transition hover:bg-white/10 hover:text-white">
              Profile
            </button>
            <button type="button" (click)="logout()" class="flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-white/80 transition hover:bg-white/10 hover:text-white">
              Logout
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="relative flex-1 overflow-hidden" #mainContent (wheel)="onWheel($event)">
      <div class="h-full overflow-auto px-6 py-8">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>

<div *ngIf="showProfileModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur">
  <div class="w-[min(90%,26rem)] rounded-3xl border border-white/10 bg-emerald-950/95 p-8 text-white shadow-[0_24px_60px_rgba(0,0,0,0.45)]">
    <h2 class="font-serif text-2xl">Profile</h2>
    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()" class="mt-6 flex flex-col gap-4">
      <label class="text-sm font-semibold uppercase tracking-[0.18em] text-white/70">Username</label>
      <input formControlName="username" class="rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none" />

      <label class="text-sm font-semibold uppercase tracking-[0.18em] text-white/70">New Password</label>
      <input type="password" formControlName="password" class="rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none" />

      <label class="text-sm font-semibold uppercase tracking-[0.18em] text-white/70">Confirm Password</label>
      <input type="password" formControlName="confirmPassword" class="rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm text-white focus:border-accent focus:outline-none" />

      <div class="mt-4 flex justify-end gap-3">
        <button type="button" class="rounded-full border border-white/20 px-5 py-2 text-sm font-semibold text-white/80 transition hover:border-white hover:text-white" (click)="closeProfileModal()">
          Cancel
        </button>
        <button type="submit" class="rounded-full bg-accent px-5 py-2 text-sm font-semibold text-pure shadow-lg shadow-[0_18px_45px_rgba(255,119,27,0.35)] transition hover:-translate-y-0.5 hover:bg-orange-500">
          Save changes
        </button>
      </div>
    </form>
  </div>
</div>
